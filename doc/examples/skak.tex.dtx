%<*!lst>
\documentclass{article}
\usepackage{memoize}
%</!lst>
\usepackage{skak}
\mmzset{
  auto=\showboard{
    memoize, args={},
    ~context~={fen={\csname chessgame.skak.mainline\endcsname}},
  },
}
%<!lst>
%<!lst>\begin{document}
\newgame\showboard
%<!lst>
\mainline{1. e4 e5}\par\showboard
%<!lst>
%<!lst>\end{document}
